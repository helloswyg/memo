(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7101)}])},7101:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});var r=n(5893),a=n(7294),o=n(8520),s=n.n(o);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(c){i=!0,a=c}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return(f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function p(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){var t="function"===typeof Map?new Map:void 0;return(h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,m(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)})(e)}function d(e,t,n){return(d=y()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&v(a,n.prototype),a}).apply(null,arguments)}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,n,r,a=function(e){var t=y();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=a.call(this)).slots=8,n.ttl=1/0,n.maxAge=1/0,n.keepPromises=!0,n.lastUsage=0,n.lastWrite=0,n.usages=[];var r=Array.isArray(e)?e:null,s=t||("object"===u(e)?e:{});return n.slots=s.slots||n.slots,n.ttl=s.ttl||n.ttl,n.maxAge=s.maxAge||n.maxAge,n.keepPromises=s.keepPromises||n.keepPromises,r&&r.forEach((function(e){var t=i(e,2),r=t[0],a=t[1];return n.set(r,a)})),n}return t=o,(n=[{key:"updateUsages",value:function(e,t){var n=this.usages.indexOf(e);if(-1!==n&&this.usages.splice(n,1),"delete"!==t){var r=Date.now();return this.usages.push(e),"write"===t&&(this.lastWrite=r),this.lastUsage=r}}},{key:"isAllExpired",value:function(){if(0===this.size)return!1;var e=Date.now(),t=e-this.lastUsage,n=e-this.lastWrite;return t>this.ttl||n>this.maxAge}},{key:"isItemExpired",value:function(e){var t=f(m(o.prototype),"get",this).call(this,e);if(!t)return!1;var n=Date.now(),r=n-t.lastUsage,a=n-t.createdAt;return r>this.ttl||a>this.maxAge}},{key:"clear",value:function(){f(m(o.prototype),"clear",this).call(this),this.lastUsage=0,this.lastWrite=0,this.usages=[]}},{key:"delete",value:function(e){var t=f(m(o.prototype),"delete",this).call(this,e);return t&&this.updateUsages(e,"delete"),t}},{key:"get",value:function(e){if(this.has(e)){var t=this.updateUsages(e,"read"),n=Object.assign(Object.assign({},f(m(o.prototype),"get",this).call(this,e)),{lastUsage:t});return f(m(o.prototype),"set",this).call(this,e,n),n}}},{key:"getValue",value:function(e){var t;return null===(t=this.get(e))||void 0===t?void 0:t.value}},{key:"has",value:function(e){return this.isAllExpired()?(this.clear(),!1):this.isItemExpired(e)?(this.delete(e),!1):f(m(o.prototype),"has",this).call(this,e)}},{key:"setValue",value:function(e,t){var n,r=this,a=this.updateUsages(e,"write"),s={key:e,value:t,createdAt:a,lastUsage:a};return f(m(o.prototype),"set",this).call(this,e,s),this.keepPromises||!(n=t)||"object"!==typeof n&&"function"!==typeof n||"function"!==typeof n.then||t.then((function(t){f(m(o.prototype),"set",r).call(r,e,Object.assign(Object.assign({},s),{value:t}))})),this.resize(),this}},{key:"resize",value:function(e){var t=this;e&&(this.slots=e);var n=this.size-this.slots;if(!(n<=0)){var r=this.usages.slice(0,n),a=this.usages.slice(n);r.forEach((function(e){return f(m(o.prototype),"delete",t).call(t,e)})),this.usages=a}}}])&&l(t.prototype,n),r&&l(t,r),o}(h(Map));function b(e){return"function"===typeof e&&e.cache instanceof g}function j(e){return function(e){return"function"===typeof e&&Array.isArray(e.lastArgs)}(e)||function(e){return"function"===typeof e&&e.hasOwnProperty("lastKey")}(e)||b(e)}function x(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var w=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"[".concat(t.map((function(e){return"".concat("string"===typeof e?"'".concat(e,"'"):e)})).join(", "),"]")},_="Function was already memoized with a different memoization function";var O=n(2656),A=n.n(O),N=n(9747),k=n.n(N);function P(e){var t=Date.now()-e,n=Math.round(t/1e3);return 0===n?"now":1===n?"1 second ago":"".concat(n," seconds ago")}function S(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){I(e,t,n[t])}))}return e}var U=function(e){e.className;var t=e.cache,n=(0,a.useState)(Date.now()),o=(n[0],n[1]),s=(0,a.useState)([]),i=s[0],c=s[1];return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=(0,a.useRef)(null),o=(0,a.useRef)(e);(0,a.useEffect)((function(){o.current=e}),[e]),(0,a.useEffect)((function(){if("number"===typeof t&&!isNaN(t))return r.current=window.setInterval((function(){return o.current()}),t),function(){return window.clearInterval(r.current||0)}}),[t].concat(S(n)))}((function(){o(Date.now());var e=t.usages,n=new Map(t.entries()),r={},a=e.map((function(e){var t=n.get(e);return t.value.then((function(t){r[e]=t})),C({},t)})).reverse();setTimeout((function(){c(a.map((function(e){return C({},e,{resolvedValue:r[e.key]})})))}))}),1e3),(0,r.jsxs)("table",{className:k().base,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Key"}),(0,r.jsx)("th",{children:"Result"}),(0,r.jsx)("th",{children:"Created At"}),(0,r.jsx)("th",{children:"Last Usage"}),(0,r.jsx)("th",{})]})}),(0,r.jsx)("tbody",{children:i.map((function(e){var n=e.key,a=e.createdAt,o=e.lastUsage,s=e.resolvedValue;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n}),(0,r.jsx)("td",{children:s||"Promise"}),(0,r.jsx)("td",{children:P(a)}),(0,r.jsx)("td",{children:P(o)}),(0,r.jsx)("td",{children:t.isItemExpired(n)?"\ud83d\udc80":""})]},String(n))}))})]})};function T(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(u){return void n(u)}i.done?t(c):Promise.resolve(c).then(r,a)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){T(o,r,a,s,i,"next",e)}function i(e){T(o,r,a,s,i,"throw",e)}s(void 0)}))}}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}function V(e){return new Promise((function(t){return setTimeout(t,e)}))}function M(){return(M=R(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(2e3+2e3*Math.random());case 2:return e.abrupt("return",new Promise((function(e){e("".concat(t," | ").concat(n))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.resolver,r=x(t,["resolver"]);if(!e||b(e))return e;if(j(e))throw new Error(_);var a=n||w,o=function t(){var n=a.apply(void 0,arguments),r=t.cache;if(r.has(n))return r.getValue(n);var o=e.apply(void 0,arguments);return r.setValue(n,o),o},s=function(){return e.apply(void 0,arguments)},i=function(){var t=a.apply(void 0,arguments),n=o.cache,r=e.apply(void 0,arguments);return n.setValue(t,r),r},c=function(){var t=a.apply(void 0,arguments),n=o.cache,r=e.apply(void 0,arguments);return n.setValue(t,r),n.get(t)},u=function(){var t=a.apply(void 0,arguments),n=o.cache;if(n.has(t))return n.get(t);var r=e.apply(void 0,arguments);return n.setValue(t,r),n.get(t)};return o.cache=new g([],r),o.skipCache=s,o.refresh=i,o.refreshCacheItem=c,o.getCacheItem=u,o}((function(e,t){return M.apply(this,arguments)}),{keepPromises:!0,slots:8,maxAge:1e4}),z=B.cache;B.cache=function(){var e=function(e){},t=new Proxy(z,{get:function(t,n){var r=Reflect.get(t,n);return e(String(n)),"function"===typeof r&&(r=r.bind(t)),r},set:function(t,n,r){return e(String(n)),Reflect.set(t,n,r)}});return t.subscribe=function(t){e=t},t}();var F=function(){var e=(0,a.useState)({param1:"",param2:""}),t=e[0],n=e[1],o=(0,a.useState)({key:"",value:"",lastUsage:0,createdAt:0,isLoading:!1}),s=o[0],i=o[1],c=(0,a.useCallback)((function(e){n((function(t){return L({},t,D({},e.target.name,e.target.value))}))}),[]),u=(0,a.useCallback)((function(e){var n=B.refreshCacheItem(t.param1,t.param2);console.log("cacheItem",n),n&&(i(L({},n,{isLoading:!0})),n.value.then((function(e){i((function(t){return t.key===n.key?L({},n,{value:e,isLoading:!1}):t}))})))}),[t]);return(0,a.useEffect)((function(){if(t.param1&&t.param2){var e=B.getCacheItem(t.param1,t.param2);console.log("cacheItem",e),e&&(i(L({},e,{isLoading:!0})),e.value.then((function(t){i((function(n){return n.key===e.key?L({},e,{value:t,isLoading:!1}):n}))})))}}),[t]),(0,r.jsx)("div",{className:A().base,children:(0,r.jsxs)("div",{className:A().dashboard,children:[(0,r.jsxs)("div",{className:A().controls,children:[(0,r.jsxs)("select",{className:A().select,name:"param1",onChange:c,value:t.param1,children:[(0,r.jsx)("option",{value:""}),(0,r.jsx)("option",{value:"A",children:"A"}),(0,r.jsx)("option",{value:"B",children:"B"}),(0,r.jsx)("option",{value:"C",children:"C"}),(0,r.jsx)("option",{value:"D",children:"D"})]}),(0,r.jsxs)("select",{className:A().select,name:"param2",onChange:c,children:[(0,r.jsx)("option",{value:""}),(0,r.jsx)("option",{value:"1",children:"1"}),(0,r.jsx)("option",{value:"2",children:"2"}),(0,r.jsx)("option",{value:"3",children:"3"}),(0,r.jsx)("option",{value:"4",children:"4"})]}),""!==s.key&&(0,r.jsxs)("div",{className:A().dates,children:[(0,r.jsxs)("span",{className:A().date,children:[(0,r.jsx)("span",{className:A().dateIcon,children:"\ud83d\udcbe"}),(0,r.jsxs)("span",{className:A().dateText,children:["Created ",P(s.createdAt)," ago"]})]}),(0,r.jsxs)("span",{className:A().date,children:[(0,r.jsx)("span",{className:A().dateIcon,children:"\ud83d\udc40"}),(0,r.jsxs)("span",{className:A().dateText,children:["Last used ",P(s.lastUsage)," ago"]})]}),s.isLoading&&(0,r.jsxs)("span",{className:A().date,children:[(0,r.jsx)("span",{className:"".concat(A().dateIcon," ").concat(A().iconSpin),children:"\ud83d\udcc0"}),(0,r.jsx)("span",{className:A().dateText,children:"Loading..."})]}),!s.isLoading&&s.createdAt!==s.lastUsage&&(0,r.jsxs)("span",{className:A().date,children:[(0,r.jsx)("span",{className:A().dateIcon,children:"\ud83c\udfaf"}),(0,r.jsx)("span",{className:A().dateText,children:"Loaded from cache"}),(0,r.jsx)("button",{className:A().dataButton,onClick:u,children:"Reload"})]}),!s.isLoading&&s.createdAt===s.lastUsage&&(0,r.jsxs)("span",{className:A().date,children:[(0,r.jsx)("span",{className:A().dateIcon,children:"\ud83e\udd6c"}),(0,r.jsx)("span",{className:A().dateText,children:"Fresh!"}),(0,r.jsx)("button",{className:A().dataButton,onClick:u,children:"Reload"})]}),!s.isLoading&&(0,r.jsxs)("span",{className:A().date,children:[(0,r.jsx)("span",{className:A().dateIcon,children:"\ud83d\udce6"}),(0,r.jsxs)("span",{className:A().dateText,children:["Response = ",s.value]})]})]})]}),(0,r.jsx)("div",{className:A().cache,children:(0,r.jsx)(U,{cache:z})})]})})};function W(){return(0,r.jsx)(F,{})}},9747:function(e){e.exports={base:"cache-monitor_base__HN6wU"}},2656:function(e){e.exports={dashboard:"home_dashboard__qtDN6",controls:"home_controls__25uFU",cache:"home_cache__3COpb",select:"home_select__2TqoJ",dates:"home_dates__3DAEA",date:"home_date__3ZMBM",dateIcon:"home_dateIcon__1YrXN",dateText:"home_dateText__rq2xg",dataButton:"home_dataButton__1_Pmp",iconSpin:"home_iconSpin__2VEIc",spin:"home_spin__2v-Vn"}}},function(e){e.O(0,[774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);